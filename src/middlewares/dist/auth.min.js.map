{"version":3,"sources":["auth.js"],"names":["jwt","require","User","req","res","next","token","decodedObj","_id","user","regeneratorRuntime","async","_context","prev","cookies","Error","userAuth","awrap","verify","sent","findById","t0","status","send","message","stop","module","exports"],"mappings":"aAAA,IAAMA,IAAIC,QAAQ,gBACZC,KAAKD,QAAQ,kBADbD,SAAW,SAACG,EAAAC,EAAlBC,GAAiB,IAAAC,EAAAC,EAAAC,EAAAC,EAAA,OAAAC,mBAAAC,MAAA,SAAAC,GAAA,OAAA,OAAAA,EAAAC,KAAAD,EAAAP,MAAA,KAAA,EAAA,GAGNC,EAAOH,EAAIW,QAAXR,MAHMM,EAAAC,KAAA,EAKTP,EALS,CAAAM,EAAAP,KAAA,EAAA,MAAA,MAEH,IAAGU,MAAXC,mBAFW,KAAA,EAAA,OAAAJ,EAAAP,KAAA,EAAAK,mBAAAO,MAQUjB,IAAIkB,OAAOZ,EAAM,mBAR3B,KAAA,EAAA,OAQPC,EAROK,EAAAO,KAEAX,EAAAD,EAAAC,IAFAI,EAAAP,KAAA,GAAAK,mBAAAO,MAEAf,KAAAkB,SAAAZ,IAFA,KAAA,GAAA,GAEAC,EAFAG,EAAAO,KAAA,CAAAP,EAAAP,KAAA,GAAA,MAAA,MAEA,IAAAU,MAAA,kBAFA,KAAA,GAebZ,EAAIM,KAAKA,EAbIJ,IAFAO,EAAAP,KAAA,GAAA,MAAA,KAAA,GAAAO,EAAAC,KAAA,GAAAD,EAAAS,GAAAT,EAAA,MAAA,GAEAR,EAAAkB,OAAA,KAAAC,KAAA,QAAAX,EAAAS,GAAAG,SAFA,KAAA,GAAA,IAAA,MAAA,OAAAZ,EAAAa,SAAA,KAAA,KAAA,CAAA,CAAA,EAAA,OAEAC,OAAAC,QAAA,CAwBfX,SAAAA","file":"auth.min.js","sourcesContent":["const jwt=require(\"jsonwebtoken\");\r\nconst User=require(\"../models/user\")\r\nconst userAuth = async (req, res, next) => {\r\n    const {token}=req.cookies;\r\n    try{\r\n    if(!token){\r\n        throw new Error(\"Token not Found\");\r\n    }\r\n    const decodedObj=await jwt.verify(token,\"DEV@Tinder$123\")\r\n    const {_id}=decodedObj;\r\n    const user=await User.findById(_id);\r\n    if(!user){\r\n        throw new Error(\"user Not found\");\r\n    \r\n    }\r\n    req.user=user;\r\n    next();\r\n    }catch(err){\r\n        res.status(400).send(\"ERROR\"+err.message);\r\n    }\r\n\r\n\r\n\r\n}\r\n\r\nmodule.exports = {\r\n  userAuth,\r\n};"]}