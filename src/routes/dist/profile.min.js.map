{"version":3,"sources":["profile.js"],"names":["express","require","profileRouter","Router","validateEditProfileData","get","userAuth","req","res","userId","regeneratorRuntime","async","_context","prev","next","user","send","status","stop","patch","loggedInUser","_context2","Error","Object","keys","body","forEach","key","awrap","save","json","message","concat","firstName","data","t0","module","exports"],"mappings":"aAAA,IAAMA,QAAQC,QAAQ,WAChBC,cAAcF,QAAQG,kBADdF,QAAQ,uBAAhBD,kBAAAA,mBAG0BC,QAAQ,uBAAjCG,kCAAAA,wBAGPF,cAAcG,IAJEJ,gBAAQK,SAAA,SAI0BC,EAAIC,GAJ9B,IAAAC,EAAA,OAAAC,mBAAAC,MAAA,SAAAC,GAAA,OAAA,OAAAA,EAAAC,KAAAD,EAAAE,MAAA,KAAA,EAKxB,IACML,EAAOF,EAAIQ,KACjBP,EAAIQ,KAAKP,GACR,MAPML,GAQHI,EAAIS,OAAO,KAAKD,KAAK,yBATD,KAAA,EAAA,IAAA,MAAA,OAAAJ,EAAAM,YAImBhB,cAAAiB,MAAA,gBAAAb,SAAA,SAAAC,EAAAC,GAAA,IAAAY,EAAA,OAAAV,mBAAAC,MAAA,SAAAU,GAAA,OAAA,OAAAA,EAAAR,KAAAQ,EAAAP,MAAA,KAAA,EAAA,GAAAO,EAAAR,KAAA,EAC3CT,wBAAGG,GADwC,CAAAc,EAAAP,KAAA,EAAA,MAAA,MAErCL,IADHa,MACa,wBAF2B,KAAA,EAAA,OAKvCd,EAAWD,EAAKS,KAapBO,OAAOC,KAAKjB,EAAIkB,MAAMC,QAAQ,SAACC,GAAD,OAAQP,EAAaO,GAAKpB,EAAIkB,KAAKE,KAlBtBN,EAAAP,KAAA,EAAAJ,mBAAAkB,MAAAR,EAAAS,QAAA,KAAA,EAAArB,EAAAsB,KAAA,CAAAC,QAAA,GAAAC,OAAAZ,EAAAa,UAAA,sCAAAC,KAAAd,IAAAC,EAAAP,KAAA,GAAA,MAAA,KAAA,GAAAO,EAAAR,KAAA,GAAAQ,EAAAc,GAAAd,EAAA,MAAA,GAAAb,EAAAS,OAAA,KAAAD,KAAA,UAAAK,EAAAc,GAAAJ,SAAA,KAAA,GAAA,IAAA,MAAA,OAAAV,EAAAH,SAAA,KAAA,KAAA,CAAA,CAAA,EAAA,QASEkB,OAAAC,QAAAnC","file":"profile.min.js","sourcesContent":["const express=require(\"express\");\r\nconst profileRouter=express.Router();\r\nconst{userAuth}=require(\"../middlewares/auth\")\r\nconst {validateEditProfileData}=require(\"../utils/validation\")\r\n\r\n\r\nprofileRouter.get(\"/profile/view\",userAuth,async (req,res)=>{\r\ntry{\r\nconst userId=req.user; \r\nres.send(userId);\r\n}catch (err) {\r\n    res.status(400).send(\"Something went wrong \");\r\n  }\r\n})\r\n\r\nprofileRouter.patch(\"/profile/edit\",userAuth,async (req,res)=>{\r\n    try{\r\n\r\n     if(!validateEditProfileData(req))   {\r\n        throw new Error(\"invalid Edit Request\");\r\n     }\r\n\r\n     const loggedInUser=req.user;\r\n\r\nObject.keys(req.body).forEach((key)=>(loggedInUser[key]=req.body[key]));\r\nawait loggedInUser.save();\r\n\r\nres.json({message:`${loggedInUser.firstName},Your profile updated successfully`,\r\ndata:loggedInUser})\r\n    }catch(err){\r\nres.status(400).send(\"ERROR: \"+ err.message);\r\n    }\r\n})\r\n\r\nmodule.exports=profileRouter"]}