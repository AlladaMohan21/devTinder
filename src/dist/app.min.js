"use strict";var express=require("express"),connectDB=require("./config/database"),app=express(),User=require("./models/user");app.use(express.json()),app.post("/signup",function(n,r){var t;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return t=new User(n.body),e.prev=1,e.next=4,regeneratorRuntime.awrap(t.save());case 4:r.send("User Added successfully!"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),r.status(400).send("Error saving the user:"+e.t0.message);case 10:case"end":return e.stop()}},null,null,[[1,7]])}),app.get("/user",function(n,r){var t,s;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.body.emailId,e.prev=1,console.log(t),e.next=5,regeneratorRuntime.awrap(User.findOne({emailId:t}));case 5:(s=e.sent)?r.send(s):r.status(404).send("User not found"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),r.status(400).send("Something went wrong ");case 12:case"end":return e.stop()}},null,null,[[1,9]])}),app.get("/feed",function(e,n){var r;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(User.find({}));case 3:r=e.sent,n.send(r),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),n.status(400).send("Something went wrong ");case 10:case"end":return e.stop()}},null,null,[[0,7]])}),app.delete("/user",function(n,r){var t;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.body.userId,e.prev=1,e.next=4,regeneratorRuntime.awrap(User.findByIdAndDelete({_id:t}));case 4:e.sent,r.send("User deleted successfully"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),r.status(400).send("Something went wrong ");case 11:case"end":return e.stop()}},null,null,[[1,8]])}),app.patch("/user",function(n,r){var t,s,a;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.body.userId,s=n.body,e.prev=2,e.next=5,regeneratorRuntime.awrap(User.findByIdAndUpdate({_id:t},s,{returnDocument:"after",runValidators:!0}));case 5:a=e.sent,console.log(a),r.send("User updated successfully"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),r.status(400).send("Something went wrong "),r.status(400).send("UPDATE FAILED:"+e.t0.message);case 14:case"end":return e.stop()}},null,null,[[2,10]])}),connectDB().then(function(){console.log("Database connection established..."),app.listen(7777,function(){console.log("Server is successfully listening on port 7777...")})}).catch(function(e){console.error("Database cannot be connected!!")});
//# sourceMappingURL=app.min.js.map
