"use strict";var express=require("express"),_require=require("./config/database"),connectDb=_require.connectDb,User=require("./models/user"),app=express();app.use(express.json()),app.get("/user",function(n,r){var t,s;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=n.body.emailId,e.next=4,regeneratorRuntime.awrap(User.find({emailId:t}));case 4:0===(s=e.sent).length?r.status(400).send("user data not found"):r.send(s),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),r.status(400).send("user data not found");case 11:case"end":return e.stop()}},null,null,[[0,8]])}),app.get("/feed",function(n,r){var t;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n.body,e.next=4,regeneratorRuntime.awrap(User.find({}));case 4:t=e.sent,r.send(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),r.status(400).send("No users left");case 11:case"end":return e.stop()}},null,null,[[0,8]])}),app.get("/id",function(n,r){var t,s;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=n.body.userId,e.next=4,regeneratorRuntime.awrap(User.findById(t));case 4:s=e.sent,r.send(s),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),r.status(400).send("user data not found");case 11:case"end":return e.stop()}},null,null,[[0,8]])}),app.delete("/user",function(n,r){var t;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=n.body.userId,e.next=4,regeneratorRuntime.awrap(User.findByIdAndDelete(t));case 4:e.sent,r.send("deleted Successfully"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),r.status(400).send("error");case 11:case"end":return e.stop()}},null,null,[[0,8]])}),app.patch("/user",function(n,r){var t,s;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.body.userId,s=n.body,e.prev=2,e.next=5,regeneratorRuntime.awrap(User.findByIdAndUpdate(t,s,{returnDocument:"after"}));case 5:e.sent,r.send("Data updated Successfully"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),r.status(400).send("Something went wrong");case 12:case"end":return e.stop()}},null,null,[[2,9]])}),app.post("/signup",function(n,r){var t;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=new User(n.body),e.next=4,regeneratorRuntime.awrap(t.save());case 4:r.send("data added successfully"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),r.status(400).send("Error Saving data"+e.t0.message);case 10:case"end":return e.stop()}},null,null,[[0,7]])}),connectDb().then(function(){console.log("Database Connection Established!"),app.listen(7777,function(){console.log("Server is successfully listening on port 7777...")})}).catch(function(e){console.error("Database Cannot be connected")});
//# sourceMappingURL=app.min.js.map
