{"version":3,"sources":["connectionRequest.js"],"names":["mongoose","require","connectionRequestSchema","Schema","fromUserId","type","Types","ObjectId","status","toUserId","String","required","values","timestamps","index","pre","next","this","equals","connectionRequest","ConnectionRequestModel","model","module","exports"],"mappings":"6JAAA,IAAMA,SAAWC,QAAQ,YAEnBC,wBAA0B,IAAIF,SAASG,OAC3C,CACEC,WAAY,CACVC,KAAML,SAASG,OAAOG,MAAMC,SAL5BP,UAAWC,GAEXC,SAAAA,CAEFE,KAAUJ,SAAEG,OAAAG,MAAAC,SACVF,UAAML,GAFVQ,OAAA,CAKEC,KAAUC,OACRL,UAAML,EACNW,MAAAA,MAAAA,CAPJC,OAAA,CAAA,UAAA,aAAA,YAAA,aAOID,gBAAAA,MAAAA,SAEM,CAAA,UAAA,aAAA,WAAA,aAFNA,gBAAAA,MAAAA,UAAAA,oCAAAA,SAKA,CAAAE,YAAA,IAYNX,wBAAwBY,MAAM,CAAEV,WAAY,EAAGK,SAAU,IAAzBL,wBAAFW,IAAA,OAAA,SAAAC,GAE9Bd,GAFyDe,KAEjCF,WAAxBG,OAFyDD,KAELR,UAClD,MAAMU,IAAAA,MAAAA,+CAENH,MAMF,IAAMI,uBAAyB,IAAIpB,SAASqB,MAH1CL,oBANFd,yBAcAoB,OAAOC,QAAUH","file":"connectionRequest.min.js","sourcesContent":["const mongoose = require(\"mongoose\");\r\n\r\nconst connectionRequestSchema = new mongoose.Schema(\r\n  {\r\n    fromUserId: {\r\n      type: mongoose.Schema.Types.ObjectId,\r\n      required: true,\r\n    },\r\n    toUserId: {\r\n      type: mongoose.Schema.Types.ObjectId,\r\n      required: true,\r\n    },\r\n    status: {\r\n      type: String,\r\n      required: true,\r\n      enum: {\r\n        values: [\"ignored\", \"interested\", \"accepeted\", \"rejected\"],\r\n        values: [\"ignored\", \"interested\", \"accepted\", \"rejected\"],\r\n        message: `{VALUE} is incorrect status type`,\r\n      },\r\n    },\r\n  },\r\n  { timestamps: true }\r\n);\r\n\r\n// ConnectionRequest.find({fromUserId: 273478465864786587, toUserId: 273478465864786587})\r\n\r\nconnectionRequestSchema.index({ fromUserId: 1, toUserId: 1 });\r\n\r\nconnectionRequestSchema.pre(\"save\", function (next) {\r\n  const connectionRequest = this;\r\n  // Check if the fromUserId is same as toUserId\r\n  if (connectionRequest.fromUserId.equals(connectionRequest.toUserId)) {\r\n    throw new Error(\"Cannot send connection request to yourself!\");\r\n  }\r\n  next();\r\n});\r\n\r\nconst ConnectionRequestModel = new mongoose.model(\r\n  \"ConnectionRequest\",\r\n  connectionRequestSchema\r\n);\r\n\r\nmodule.exports = ConnectionRequestModel;"]}