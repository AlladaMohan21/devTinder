{"version":3,"sources":["connectionRequest.js"],"names":["mongoose","require","connectionRequestSchema","Schema","fromUserId","type","Types","ObjectId","required","toUserId","status","String","values","timestamps","index","pre","next","connectionRequest","equals","Error","ConnectionRequestModel","model","module","exports"],"mappings":";;;;;;AAAA,IAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAD,CAAxB;;AAEA,IAAMC,uBAAuB,GAAG,IAAIF,QAAQ,CAACG,MAAb,CAC9B;AACEC,EAAAA,UAAU,EAAE;AACVC,IAAAA,IAAI,EAAEL,QAAQ,CAACG,MAAT,CAAgBG,KAAhB,CAAsBC,QADlB;AAEVC,IAAAA,QAAQ,EAAE;AAFA,GADd;AAKEC,EAAAA,QAAQ,EAAE;AACRJ,IAAAA,IAAI,EAAEL,QAAQ,CAACG,MAAT,CAAgBG,KAAhB,CAAsBC,QADpB;AAERC,IAAAA,QAAQ,EAAE;AAFF,GALZ;AASEE,EAAAA,MAAM,EAAE;AACNL,IAAAA,IAAI,EAAEM,MADA;AAENH,IAAAA,QAAQ,EAAE,IAFJ;AAGN;AACEI,MAAAA,MAAM,EAAE,CAAC,SAAD,EAAY,YAAZ,EAA0B,WAA1B,EAAuC,UAAvC;AADV,wCAEU,CAAC,SAAD,EAAY,YAAZ,EAA0B,UAA1B,EAAsC,UAAtC,CAFV;AAHM;AATV,CAD8B,EAoB9B;AAAEC,EAAAA,UAAU,EAAE;AAAd,CApB8B,CAAhC,C,CAuBA;;AAEAX,uBAAuB,CAACY,KAAxB,CAA8B;AAAEV,EAAAA,UAAU,EAAE,CAAd;AAAiBK,EAAAA,QAAQ,EAAE;AAA3B,CAA9B;AAEAP,uBAAuB,CAACa,GAAxB,CAA4B,MAA5B,EAAoC,UAAUC,IAAV,EAAgB;AAClD,MAAMC,iBAAiB,GAAG,IAA1B,CADkD,CAElD;;AACA,MAAIA,iBAAiB,CAACb,UAAlB,CAA6Bc,MAA7B,CAAoCD,iBAAiB,CAACR,QAAtD,CAAJ,EAAqE;AACnE,UAAM,IAAIU,KAAJ,CAAU,6CAAV,CAAN;AACD;;AACDH,EAAAA,IAAI;AACL,CAPD;AASA,IAAMI,sBAAsB,GAAG,IAAIpB,QAAQ,CAACqB,KAAb,CAC7B,mBAD6B,EAE7BnB,uBAF6B,CAA/B;AAKAoB,MAAM,CAACC,OAAP,GAAiBH,sBAAjB","sourcesContent":["const mongoose = require(\"mongoose\");\r\n\r\nconst connectionRequestSchema = new mongoose.Schema(\r\n  {\r\n    fromUserId: {\r\n      type: mongoose.Schema.Types.ObjectId,\r\n      required: true,\r\n    },\r\n    toUserId: {\r\n      type: mongoose.Schema.Types.ObjectId,\r\n      required: true,\r\n    },\r\n    status: {\r\n      type: String,\r\n      required: true,\r\n      enum: {\r\n        values: [\"ignored\", \"interested\", \"accepeted\", \"rejected\"],\r\n        values: [\"ignored\", \"interested\", \"accepted\", \"rejected\"],\r\n        message: `{VALUE} is incorrect status type`,\r\n      },\r\n    },\r\n  },\r\n  { timestamps: true }\r\n);\r\n\r\n// ConnectionRequest.find({fromUserId: 273478465864786587, toUserId: 273478465864786587})\r\n\r\nconnectionRequestSchema.index({ fromUserId: 1, toUserId: 1 });\r\n\r\nconnectionRequestSchema.pre(\"save\", function (next) {\r\n  const connectionRequest = this;\r\n  // Check if the fromUserId is same as toUserId\r\n  if (connectionRequest.fromUserId.equals(connectionRequest.toUserId)) {\r\n    throw new Error(\"Cannot send connection request to yourself!\");\r\n  }\r\n  next();\r\n});\r\n\r\nconst ConnectionRequestModel = new mongoose.model(\r\n  \"ConnectionRequest\",\r\n  connectionRequestSchema\r\n);\r\n\r\nmodule.exports = ConnectionRequestModel;"],"file":"connectionRequest.dev.js"}